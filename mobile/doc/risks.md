# 风险与规避

1) Node-only 库兼容性
- 现状：`fs`, `path`, `yauzl`, `simple-git`, `jimp` 等在 RN 不可用。
- 规避：
  - 移动端不引入服务端/打包用工具。
  - 仅复用纯函数模块；其余重写 RN 版本或降级（如先不支持 PNG 角色卡）。

2) 流式与网络
- 不同供应商的流式协议差异（SSE、chunked JSON）。
- 规避：抽象统一 `StreamAdapter`；对齐解析器；引入超时与重连策略。

3) 安全与秘钥存储
- 秘钥泄露风险。
- 规避：SecureStore；调试日志中打码；导出前二次确认。

4) 端上性能
- 长消息/多图片渲染卡顿。
- 规避：虚拟列表、按需渲染、代码块延迟高亮。

5) App 审核
- 不同平台对生成式 AI 有额外合规要求。
- 规避：增加免责声明与开关；明确数据去向；遵守供应商政策。
